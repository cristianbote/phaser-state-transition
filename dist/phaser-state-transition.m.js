var t=function(t){this.game=t,this.onComplete=null,this._tweens=[]};t.prototype.start=function(t,e){var n,o,r=e.props,a=!!e.intro,i={_:{}};for(n in this.currentTarget=t,"function"==typeof r&&(r=r(this.game)),a&&this._prepareTargetForTweening(r),r)r.hasOwnProperty(n)&&("function"==typeof r[n]&&(r[n]=r[n](this.game)),"object"==typeof t[n]?i[n]=r[n]:i._[n]=r[n]);for(n in i)i.hasOwnProperty(n)&&(this._tweens.push(this.game.add.tween("_"===n?t:t[n])[a?"from":"to"](i[n],e.duration,e.ease,!0,e.delay)),(o=this._tweens[this._tweens.length-1]).onComplete.addOnce(this._checkForComplete,this),o.onLoop.addOnce(function(){console.log("progress",this)},this))},t.prototype._checkForComplete=function(t,e){for(var n=0,o=this._tweens.length,r=0;n<o;n++)!1===this._tweens[n].isRunning&&(r++,this.game.tweens.remove(e));r===o&&(this.onComplete&&this.onComplete(),this.currentTarget.destroy())},t.prototype._prepareTargetForTweening=function(t){t.hasOwnProperty("alpha")&&(this.currentTarget.alpha=0)},t.prototype.destroy=function(t){t.destroy()},t.prototype.stop=function(){this._active=!1,this.update()};var e=function(){return parseInt(Phaser.VERSION.replace(/\./g,""),10)>248},n=function(t){function n(n,o,r,a){var i=new Phaser.RenderTexture(n,n.width,n.height);if(t.call(this,n,o||0,r||0,i),!a){var s=new Phaser.Graphics(n,0,0);s.beginFill(n.stage.backgroundColor),s.drawRect(0,0,n.width,n.height),s.endFill(),n.stage.addChildAt(s,0),i.renderXY(s,0,0),n.stage.removeChild(s)}e()?i.renderXY(n.world,-1*n.camera.position.x,-1*n.camera.position.y):i.renderXY(n.world,n.width/2-n.camera.position.x,n.height/2-n.camera.position.y),this.inputEnabled=!0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n}(Phaser.Image),o=function(e,o){this.game=e,this._contentSnapshot=new n(e,0,0,o),this._transition=new t(e)};o.prototype.go=function(t){this.game.stage.addChildAt(this._contentSnapshot,this.game.stage.children.length),this._transition.start(this._contentSnapshot,t)};var r=function(t){for(var e=0,o=t.length;e<o;e+=1)t[e]&&t[e]instanceof n&&t[e].destroy()};var a=Phaser.StateManager.prototype.start;Phaser.StateManager.prototype.start=function(t,e,n){for(var i=[],s=arguments.length-3;s-- >0;)i[s]=arguments[s+3];(function(t,e,n){var a,i,s=this,h=s.states[t],p=h.create;s.game.stage&&r(s.game.stage.children),s.game.isBooted&&e&&(a=new o(s.game,e.noStage),function(t,e,n){t.create=function(){p.call(this),n&&(i=new o(s.game,n.noStage),s._created=!1,i.go(n),i._transition.onComplete=function(){s._created=!0,r(s.game.stage.children)}),a.go(e),t.create=p}}(h,e,n))}).call(this,t,e,n),a.call.apply(a,[this,t].concat(i))};var i=function(t){return{ease:t.ease||Phaser.Easing.Exponential.InOut,duration:t.duration||500,intro:t.intro||!1,props:t.props||{}}},s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Phaser.Plugin);s.createTransition=i;export default s;export{i as createTransition};
//# sourceMappingURL=phaser-state-transition.m.js.map
